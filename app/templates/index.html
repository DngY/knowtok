<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KnowTok</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/auth.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/card.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <nav class="top-nav">
        <div class="nav-content">
            <div class="nav-left">
                <div class="logo">KnowTok</div>
                <div class="nav-links">
                    <a href="#" class="active" data-i18n="discover" style="display: none;">Discover</a>
                    <a href="#" data-i18n="collections" style="display: none;">Collections</a>
                    <a href="#" data-i18n="topics" style="display: none;">Topics</a>
                </div>
            </div>
            <div class="nav-right">
                <select id="languageSelect" class="language-select">
                    <option value="en">ğŸŒ English</option>
                    <option value="zh">ğŸŒ ä¸­æ–‡</option>
                </select>
                <div class="auth-buttons">
                    <button class="btn-login" data-i18n="login">ç™»å½•</button>
                    <button class="btn-register" data-i18n="register">æ³¨å†Œ</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- ç®€åŒ–ä¸»å†…å®¹åŒºç»“æ„ -->
    <main class="main-content">
        <div class="articles-grid" id="articles-container">
            <!-- å†…å®¹å°†ç”±JavaScriptåŠ¨æ€å¡«å…… -->
        </div>
    </main>

    <!-- ç®€åŒ–çš„ç™»å½•æ¨¡æ€æ¡† -->
    <div id="loginContainer" style="display: none;" class="modal-container">
        <div class="modal">
            <span class="close" onclick="closeAllModals()">&times;</span>
            <div class="modal-content">
                <h2 data-i18n="loginTitle">ç™»å½•</h2>
                <form id="loginForm" onsubmit="handleLogin(event)">
                    <div class="form-group">
                        <input type="text" name="identifier" data-i18n-placeholder="email" placeholder="é‚®ç®±æˆ–æ‰‹æœºå·" required>
                    </div>
                    <div class="form-group">
                        <input type="password" name="password" data-i18n-placeholder="password" placeholder="å¯†ç " required>
                    </div>
                    <button type="submit" class="btn-primary" data-i18n="login">ç™»å½•</button>
                </form>
                <p class="form-footer">
                    <span data-i18n="noAccount">è¿˜æ²¡æœ‰è´¦å·ï¼Ÿ</span>
                    <a href="#" onclick="showRegisterModal()" data-i18n="signUp">ç«‹å³æ³¨å†Œ</a>
                </p>
            </div>
        </div>
    </div>

    <!-- ç®€åŒ–çš„æ³¨å†Œæ¨¡æ€æ¡† -->
    <div id="registerContainer" style="display: none;" class="modal-container">
        <div class="modal">
            <span class="close" onclick="closeAllModals()">&times;</span>
            <div class="modal-content">
                <h2 data-i18n="registerTitle">Register Account</h2>
                <form id="registerForm" onsubmit="handleRegister(event)">
                    <div class="form-group">
                        <input type="text" name="username" data-i18n-placeholder="username" required>
                    </div>
                    <div class="form-group">
                        <input type="email" name="email" data-i18n-placeholder="email">
                    </div>
                    <div class="form-group">
                        <input type="tel" name="phone" data-i18n-placeholder="phone">
                    </div>
                    <div class="form-group">
                        <input type="password" name="password" data-i18n-placeholder="password" required>
                    </div>
                    <button type="submit" class="btn-primary" data-i18n="register">Register</button>
                </form>
                <p class="form-footer">
                    <span data-i18n="hasAccount">Already have an account?</span>
                    <a href="#" onclick="showLoginModal()" data-i18n="signIn">Sign in</a>
                </p>
            </div>
        </div>
    </div>

    <!-- ä¿®æ”¹åº•éƒ¨å·¥å…·æ ï¼Œæ˜¾ç¤ºæ”¶è—æŒ‰é’® -->
    <div class="bottom-toolbar">
        <div class="toolbar-content">
            <button class="toolbar-button refresh" onclick="loadArticles()">
                <span class="icon">ğŸ”„</span>
                <span data-i18n="refresh">Refresh</span>
            </button>
            <button class="toolbar-button" onclick="showLikes()">
                <span class="icon">â¤ï¸</span>
                <span data-i18n="favorites">Favorites</span>
            </button>
            <button class="toolbar-button" style="display: none;">
                <span class="icon">ğŸ¯</span>
                <span data-i18n="topics">Topics</span>
            </button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="{{ url_for('static', filename='js/i18n.js') }}"></script>
    <script>
        // ç¡®ä¿è¯­è¨€é€‰æ‹©å™¨å­˜åœ¨åå†åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            if (window.languageManager) {
                const savedLanguage = window.languageManager.getCurrentLanguage();
                const select = document.getElementById('languageSelect');
                if (select) {
                    select.value = savedLanguage;
                }
            }
        });
    </script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script src="{{ url_for('static', filename='js/auth.js') }}"></script>
</body>
</html>
